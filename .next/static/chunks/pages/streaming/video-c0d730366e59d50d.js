(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{3612:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var a=s(7876);function r(e){let{imageUrl:t="/images/logo.png",size:s="90%",opacity:r=.05,scale:l=1.5}=e;return(0,a.jsx)("div",{className:"fixed inset-0 pointer-events-none z-0",style:{backgroundImage:'url("'.concat(t,'")'),backgroundSize:s,backgroundPosition:"center",backgroundRepeat:"no-repeat",opacity:r,transform:"scale(".concat(l,")")}})}s(4232)},5488:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/streaming/video",function(){return s(6629)}])},6629:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(7876),r=s(4232),l=s(4402),i=s(9668),c=s(7328),n=s.n(c),d=s(7171),o=s(5364);function m(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!0),[i,c]=(0,r.useState)(null);return((0,r.useEffect)(()=>{(async()=>{try{let s="https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=".concat(o.env.NEXT_PUBLIC_YOUTUBE_CHANNEL_ID,"&type=video&eventType=completed&maxResults=3&order=date&key=").concat(o.env.NEXT_PUBLIC_YOUTUBE_API_KEY),a=await fetch(s);if(!a.ok){var e;let t=await a.json().catch(()=>null);throw Error("HTTP error! status: ".concat(a.status).concat(t?" - ".concat((null==(e=t.error)?void 0:e.message)||""):""))}let r=await a.json();if(r.error)throw Error(r.error.message||"YouTube API error");r.items&&r.items.length>0&&t(r.items)}catch(e){c(e.message)}finally{l(!1)}})()},[]),s)?(0,a.jsxs)("div",{className:"mt-32",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recent Broadcasts"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]},e))})]}):i?(0,a.jsxs)("div",{className:"mt-32",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recent Broadcasts"}),(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-red-600",children:"Failed to load recent broadcasts"}),(0,a.jsx)("p",{className:"text-sm text-red-500 mt-1",children:i})]})]}):0===e.length?(0,a.jsxs)("div",{className:"mt-32",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recent Broadcasts"}),(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-gray-600",children:"No recent broadcasts available"})})]}):(0,a.jsxs)("div",{className:"mt-32",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Recent Broadcasts"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"aspect-video relative",children:[(0,a.jsx)("img",{src:e.snippet.thumbnails.high.url,alt:e.snippet.title,className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4",children:(0,a.jsx)("p",{className:"text-white text-sm",children:new Date(e.snippet.publishedAt).toLocaleDateString()})})]}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-2 line-clamp-2",children:e.snippet.title}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:e.snippet.description}),(0,a.jsx)("button",{onClick:()=>window.open("https://www.youtube.com/watch?v=".concat(e.id.videoId),"_blank"),className:"w-full bg-[#90651b] hover:bg-[#a67a2a] text-white px-4 py-2 rounded-md transition-colors",children:"Watch Recording"})]})]},e.id.videoId))})]})}var x=s(3612),h=s(5364);function u(){let[e,t]=(0,r.useState)(!1),s=h.env.NEXT_PUBLIC_DEFAULT_VIDEO_ID,c=(0,r.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),t(e=>!e)},[]);return(0,a.jsxs)("div",{className:"min-h-screen bg-white relative",children:[(0,a.jsx)(x.A,{}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsxs)(n(),{children:[(0,a.jsx)("title",{children:"".concat(e?"Live Stream":"Video Broadcast"," | EGFM USA")}),(0,a.jsx)("meta",{name:"description",content:"Watch EGFM USA's live video broadcasts and recorded services"})]}),(0,a.jsxs)("div",{className:"relative min-h-[40vh] bg-gradient-to-b from-gray-900 to-black",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-[url('/images/hero-bg.svg')] bg-cover bg-center opacity-20"}),(0,a.jsx)(l.A,{}),(0,a.jsx)("div",{className:"relative max-w-7xl mx-auto px-4 pt-40 md:pt-48 pb-12",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 text-white",children:e?"Live Stream":"Video Broadcast"}),(0,a.jsx)("p",{className:"text-lg md:text-xl text-gray-300",children:e?"Watch our live service":"Watch our recorded services and events"})]})})]}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-12",children:[(0,a.jsx)("div",{className:"bg-gray-100 rounded-lg p-8 mb-8",children:(0,a.jsx)("div",{className:"w-full",children:h.env.NEXT_PUBLIC_DEFAULT_VIDEO_ID?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"relative w-full aspect-video",children:(0,a.jsx)(d.A,{videoId:s,isLive:e},"player-".concat(e?"live":"recorded"))}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{onClick:c,type:"button",className:"".concat(e?"bg-red-500 hover:bg-red-600":"bg-green-500 hover:bg-green-600"," text-white px-6 py-2 rounded-md transition-colors"),children:e?"End Stream":"Start Stream"})})]}):(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("p",{className:"text-red-500 mb-4",children:"Video configuration is missing"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please check your environment variables configuration."})]})})}),(0,a.jsx)(m,{})]}),(0,a.jsx)(i.A,{})]})]})}},7171:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(7876),r=s(4232),l=s(5364);function i(e){let{isLive:t=!1}=e,[s,i]=(0,r.useState)(null),[c,n]=(0,r.useState)(null),[d,o]=(0,r.useState)(null),[m,x]=(0,r.useState)(0);return((0,r.useEffect)(()=>{let e=async()=>{let e=Date.now();if(!d||!(e-m<9e5)){if(!t)return void i(null);try{let t="https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=".concat(l.env.NEXT_PUBLIC_YOUTUBE_CHANNEL_ID,"&type=video&eventType=live&key=").concat(l.env.NEXT_PUBLIC_YOUTUBE_API_KEY),s=await fetch(t);if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let a=await s.json();if(a.error)throw Error(a.error.message||"YouTube API error");if(a.items&&a.items.length>0){let t=a.items[0].id.videoId;i(t),n(null),o(a),x(e)}else n("No live stream found"),i(null)}catch(e){n("Failed to check for live stream: ".concat(e.message)),i(null)}}};e();let s=setInterval(e,9e5);return()=>clearInterval(s)},[t]),c)?(0,a.jsx)("div",{className:"relative w-full aspect-video bg-gray-900 rounded-lg overflow-hidden flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-white text-center p-4",children:[(0,a.jsx)("p",{className:"text-red-500 mb-2",children:"Error loading video player"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:c})]})}):t&&!s?(0,a.jsx)("div",{className:"relative w-full aspect-video bg-gray-900 rounded-lg overflow-hidden flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-white text-center p-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-[#90651b] border-t-transparent rounded-full animate-spin mb-4"}),(0,a.jsx)("p",{children:"Checking for live stream..."})]})}):t?(0,a.jsxs)("div",{className:"relative w-full aspect-video bg-black rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"absolute top-4 left-4 z-10 flex items-center bg-red-600 text-white px-3 py-1 rounded-full",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"LIVE"})]}),(0,a.jsx)("iframe",{src:"https://www.youtube.com/embed/".concat(s,"?autoplay=1&modestbranding=1&rel=0&showinfo=0&controls=1"),className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,frameBorder:"0"})]}):(0,a.jsx)("div",{className:"relative w-full aspect-video bg-gray-900 rounded-lg overflow-hidden flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-white text-center p-4",children:[(0,a.jsx)("p",{className:"text-xl mb-2",children:"Click Start Stream to Begin"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Join us for our live stream"})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[938,755,667,636,593,792],()=>t(5488)),_N_E=e.O()}]);